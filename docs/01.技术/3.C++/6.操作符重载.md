---
title: 操作符重载
date: 2024-01-21 03:32:44
permalink: /pages/3892ce/
categories:
  - 技术
  - C++
tags:
  - 
author: 
  name: aXing
  link: https://github.com/08163356
---
### 一、操作符重载

问题：参数必须是类对象的常引用吗？

可以不使用引用，但会产生对象拷贝动作，降低效率

可以不是常引用，但是内部参数的值可能被修改。

可以使用指针，但与常规数学公式使用方式不符。操作符重载不传地址。

java中的反射机制和C++中的友元函数有什么区别

操作符重载的意义在哪儿？

#### **左值和右值**

右值引用可以使用文字作为函数实际参数

传递文字作为实际参数，传递右值引用

具有右值引用作为左值，匿名右值引用作为右值

右值引用可以避免编写过多的构造与赋值函数

使用右值引用，通过函数模板可以缩减代码编写，可以实现完美转发，

#### **流操作符重载**

**流与文件**

所有单参数的流式操作符都是函子，C++库函数中预定义了很多操纵符

**文件流**

包含头文件“fstream”

创建者：按照特定格式重载流操作符

使用者：创建文件流对象，输入输出。

**数据持久化**

将数据保存在外部文件中，在程序运行时装入，在程序结束时重新写回文件

**操作符重载原则**

- 只能使用已有的操作符号，不能创建新的操作符
- 操作符也是函数，重载遵循函数重载原则​：函数签名必须不一样。​
- 重载的操作符不能改变优先级和结合性，也不能改变操作个数和语法结构
- 重载的操作符不能改变其用于内部类型对象的含义，他只能和用户自定义类型的对象一起使用，或者用于用户自定义类型的对象和内部类型的对象混用
- 重载的操作符在功能上应与原有功能一致，即保持一致语义，形式上是统一的

**操作符号重载类型：成员函数或友元函数**

- 重载为类的成员函数：少一个参数（隐含this，标识二元表达式的左参数或者一元表达式的参数）
- 重载为类的友元函数：没有隐含this参数

**成员函数和友元函数**

一般全局常用操作符（关系操作符、逻辑操作符、流操作符）重载为友元函数，涉及对下个特殊运算的操作符重载为成员函数。

一般单目操作符重载为成员函数，双目操作符重载为友元函数（左右操作数使用更灵活）

部分双目操作符不能重载友元函数：“=”、“（）”、“[]”、“->”

类型转换操作符只能重载为成员函数

重载操作符参数一般采用引用形式，主要与数学运算协调。

![](G:\照片\屏幕截图\重载原型推荐.png)





位操作符重载不推荐，new操作符重载有时候相当有意义

需要频繁的开辟小数组时，全局的new和delete效率很低。一开始就申请一块内存区域，然后重载new操作符，在申请的缓冲池里面进行操作。从而提高系统的效率，甚至设置垃圾回收机制。大部分情况重载位成员函数更安全

### 散装知识点、问题

1.为什么要使用操作符重载啊？

2.this指针具体的含义

3.四则运算符重载有什么应用常合呢？

4.搭建VPN的软件：Dsr、Ssr、Ss、V2ray

5.C++的内存模型是什么呢？

6.匿名的枚举型是什么？

