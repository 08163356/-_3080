---
title: 状态模式
date: 2024-01-21 03:32:47
permalink: /pages/80c474/
categories:
  - 技术
  - 设计模式
tags:
  - 
author: 
  name: aXing
  link: https://github.com/08163356
---
### 一、学前思考

1.什么是状态模式?

2.猜想：状态模式是解决对象状态变化象关的问题？

3.那对象变化是指什么样的变化呢？

### 二、“状态变化”模式之State（状态模式）

在组件构建过程中，某些对象的状态经常面临变化，如何对这些变化进行有效管理？同时又维持高层模块的稳定？“状态变化模式”为这一问题提供了一种解决方案

理解：状态变化模式是为了应对对象状态变化且维持高层模块稳定

#### 1.动机

当项目中又多个状态时，将状态切换转换成对象状态行为的切换

#### 2.模式定义

允许一个对象在其内部状态改变他的行为，从未使得对象看起来似乎修改了其行为

#### 3.结构

**聚合（Aggregation）**：关联关系的一种特例，表示部分和整体（整体 has a 部分）的关系。uml中用带空心菱形头的实线表示Aggregation关系，菱形头指向整体。

**特征**：属于是关联的特殊情况，体现部分-整体关系，是一种弱拥有关系；整体和部分可以有不一样的生命周期；是一种弱关联；

#### 4.要点总结

- State模式将所有与一个特定状态象关的行为都放入一个State的子类对象中，在对象状态切换时，切换相应的对象；但同时维持State的接口，这样实现了具体操作与状态转换之间的解耦
- 为不同的状态引入不同的对象使得状态转换变得更加明确，而且可以保证不会出现状态不一致的情况，因转换是原子性的--即要么彻底转换过来，要么不转换。
- 如果State对象没有实例变量，那么各个上下文可以共享同一个State对象，从而节省对象开销。

### 三、散装知识点

1.虚函数其实就是运行时的if，else

2.枚举类型的作用是什么？

> 有的变量只有几种可能取值。如人的性别只有两种可能取值，星期只有七种可能取值。在 C 语言中对这样取值比较特殊的变量可以定义为枚举类型。所谓枚举是指将变量的值一一列举出来，变量只限于列举出来的值的范围内取值。定义一个变量是枚举类型，可以先定义一个枚举类型名，然后再说明这个变量是该枚举类型。

3.状态机和状态模式是一样的

4.state模式和策略模式十分相像

