---
title: 如何使用指令进行性能优化
date: 2024-01-21 03:32:46
permalink: /pages/921f13/
categories:
  - 技术
  - 前端
  - 性能优化
tags:
  - 
author: 
  name: aXing
  link: https://github.com/08163356
---
## 指令是什么？

是类似于v-if、v-else、v-bind、v-model等嵌入到html语句中的命令。通过他可以快捷的实现指令定义的功能。

因为在vue3中一个vue最终会被转换为虚拟dom，在转换的过程中，指令实际上被放在了一个数组中，在被触发的时候通过遍历的方式去获取指令对应的方法进行调用。因此指令的编写实际上等同于函数的编写，就是需要遵循的是vue的一些语法。

## 指令在性能优化中能起到什么作用吗？

### vue3.2新增指令v-memo

作用

```
v-memo:可以做性能优化，v-memo中值若不发生变化，整个子树的更新会被跳过。
<div v-memo="[valueA, valueB]">
  ...
</div>
当组件重新渲染的时候，如果 valueA 与 valueB 都维持不变。
那么对这个 <div> 以及它的所有子节点的更新都将被跳过。
事实上，即使是虚拟 DOM 的 VNode 创建也将被跳过，因为子树的记忆副本可以被重用。通过该方法就能进行性能提升
```

使用场景

```
对于数据更新的场景
当后端返回大量的数据时，选出符合条件的数据进行展示，不符合条件的则不进行改变
```

### v-once 指令

说明:v-once 用于指定元素或者组件只渲染一次;当数据发生变化时，元素或者组件以及其所有的子元素将视为静态内容并且跳过；该指令可以用于性能优化；

## 如何自定义指令进行性能优化

图片、组件等懒加载v-lazy

需要具体的场景

