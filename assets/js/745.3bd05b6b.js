(window.webpackJsonp=window.webpackJsonp||[]).push([[745],{1084:function(e,t,r){"use strict";r.r(t);var o=r(7),v=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("composite layers是做什么的")]),e._v(" "),t("p",[e._v("浏览器渲染，浏览器常见的渲染引擎有 Webkit/Gecko 等，他们的主要渲染流程基本相同，这里主要讨论一下 WebKit 简化的渲染流程。")]),e._v(" "),t("p",[t("img",{attrs:{src:"https://segmentfault.com/img/remote/1460000041197296",alt:"渲染流程"}})]),e._v(" "),t("ul",[t("li",[e._v("浏览器下载并解析 HTML。")]),e._v(" "),t("li",[e._v("处理 "),t("code",[e._v("CSS")]),e._v(" 构建 "),t("code",[e._v("CSSOM")]),e._v(" 树，生成 "),t("code",[e._v("DOM")]),e._v(" 树。")]),e._v(" "),t("li",[t("code",[e._v("DOM")]),e._v(" 与 "),t("code",[e._v("CSSOM")]),e._v(" 合并成一个 "),t("code",[e._v("Render")]),e._v(" 树。")]),e._v(" "),t("li",[e._v("有了 "),t("code",[e._v("Render Tree")]),e._v("，浏览器可以知道各个节点的 "),t("code",[e._v("CSS")]),e._v(" 定义以及他们的从属关系，从而去计算出每个节点在屏幕中的位置，生成一个足够大的画布来容纳所有元素。")]),e._v(" "),t("li",[e._v("根据浏览器提供各层的信息合成图层，显示到屏幕上。")])]),e._v(" "),t("h3",{attrs:{id:"_1-什么是合成层-compositing-layer"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是合成层-compositing-layer"}},[e._v("#")]),e._v(" 1. 什么是合成层（Compositing Layer）")]),e._v(" "),t("p",[e._v("首先合成就是将页面的各个部分分成多个层、单独"),t("code",[e._v("光栅化")]),e._v("（浏览器根据文档的结构、每个元素的样式、页面的几何形状和绘制顺序转换为屏幕上的像素的过程）它们并在合成器线程中合成为一个页面的技术。")]),e._v(" "),t("p",[e._v("一般来说，拥有一些特定属性的渲染层，会被浏览器自动提升为合成层。合成层拥有单独的图层（GraphicsLayer），和其他图层之间无不影响。而其它不是合成层的渲染层，则和第一个拥有图层的父层共用一个，也就是普通文档流中的内容，我们看一些常见的提升为合成层的属性。")]),e._v(" "),t("ul",[t("li",[e._v("设置 "),t("code",[e._v("transform: translateZ(0)")]),e._v("，注意它必须是 "),t("code",[e._v("translateZ")]),e._v("，因为它使用 GPU 来计算 "),t("code",[e._v("perspective distortion")]),e._v("（透视失真）。"),t("code",[e._v("perspective")]),e._v(" 在 3D 设计中是一个重要的属性，有兴趣的同学可以看"),t("a",{attrs:{href:"https://link.segmentfault.com/?enc=afCSzBm%2FaWzfXupuAug%2FGg%3D%3D.1NV6VfD3FN%2Fhx2WFn9yBAYpo8cmF6TxiP9x1T0bUIAGLXaTEgWDYVSRCxDYBUvkxGCK5T%2FyaEvw76GilxYBebErJbUXMrLo8gUkeWg8ibWYG7LIGPyVXLenXJhwHRRzy8PVe2FMgQanTmMlohE%2F9erqOXlt3jIpQckE9xW4wIJLJ6aGsrQozm5YSH84SE3l5gy1CNj%2B6880vRGheQ2mvPwlSVDOcJMY9%2B9oHqYOsEJo%3D",target:"_blank",rel:"noopener noreferrer"}},[e._v("这份资料"),t("OutboundLink")],1),e._v("了解一下。如果你使用 "),t("code",[e._v("translateX")]),e._v(" 或 "),t("code",[e._v("translateY")]),e._v("，元素将会被绘制在普通文档流中 "),t("a",{attrs:{href:"https://link.segmentfault.com/?enc=ohaBHXGxCTtM5KHIQ6VHXA%3D%3D.kuYSj6BOfOt%2FUIvMZJotDyOqCq%2BN7OVHssd%2FLa6cXDw%3D",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("li",[t("a",{attrs:{href:"https://link.segmentfault.com/?enc=XzVi%2F8zOr7EVO3C78f06cQ%3D%3D.1RVjdCzqsf1xIvbKPEFKpw3aoW77m%2FMzavJk0AcMbvzWZWm8v%2BdB6%2FkP4PU%2FQY620exA%2BuUa8KZz7eeOjDrmQKiSZpiWbGtfiv5cHGvAvBU%3D",target:"_blank",rel:"noopener noreferrer"}},[e._v("backface-visibility: hidden"),t("OutboundLink")],1),e._v(" 指定当元素背面朝向观察者时是否可见 "),t("a",{attrs:{href:"https://link.segmentfault.com/?enc=2l50vwRMuogT3hAK3F0oLg%3D%3D.j2Jszz%2FSKcUJGKzlxcH3MPSwN84Kgt1d8O9uRqLIFV4%3D",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("li",[t("code",[e._v("will-change")]),e._v(" 该属性告诉浏览器该元素会有哪些变化，这样浏览器可以提前做好对应的优化准备工作。当该属性的值为 opacity、transform、top、left、bottom、right 时 "),t("a",{attrs:{href:"https://link.segmentfault.com/?enc=Dre9I8MoumsAs3R9utUqfQ%3D%3D.IfsdrdNjfTiOKTYZ7PIoR2iuIGJ1kdAFtEcW7Np64Xo%3D",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("li",[t("code",[e._v("video")]),e._v("、"),t("code",[e._v("canvas")]),e._v("、"),t("code",[e._v("iframe")]),e._v(" 等元素。")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://segmentfault.com/a/1190000041197292",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考文档--全面"),t("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=v.exports}}]);