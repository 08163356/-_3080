(window.webpackJsonp=window.webpackJsonp||[]).push([[465],{802:function(s,n,a){"use strict";a.r(n);var e=a(7),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("什么是动态组件 就是：让多个组件使用同一个"),n("a",{attrs:{href:"https://so.csdn.net/so/search?q=%E6%8C%82%E8%BD%BD&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[s._v("挂载"),n("OutboundLink")],1),s._v("点，并动态切换，这就是动态组件。")]),s._v(" "),n("p",[s._v("在挂载点使用"),n("a",{attrs:{href:"https://so.csdn.net/so/search?q=component&spm=1001.2101.3001.7020",target:"_blank",rel:"noopener noreferrer"}},[s._v("component"),n("OutboundLink")],1),s._v("标签，然后使用v-bind:is=”组件”")]),s._v(" "),n("h2",{attrs:{id:"解决方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[s._v("#")]),s._v(" 解决方案")]),s._v(" "),n("h3",{attrs:{id:"方案一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方案一"}},[s._v("#")]),s._v(" 方案一")]),s._v(" "),n("p",[s._v("Vue 动态插入组件 用js函数的方式\n第一步 import vue组件\n第二步 Vue把组件扩展进去\n第三步 创建实例\n第四步 将组件的el挂载到document.body上\n第五步 设置组件内部data的值，相当于设置props")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("import yourComponent from './yourComponent.vue'\nimport Vue from 'vue'\nexport function openYourComponent (openType = '0') {\n  let Task = Vue.extend(yourComponent)\n  let taskvm = new Task()\n  document.body.appendChild(taskvm.$mount().$el)\n  taskvm.openType = openType\n}\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[s._v("（上述方法没用）")]),s._v(" "),n("p",[s._v("Vue 动态插入组件 用js函数的方式")]),s._v(" "),n("h3",{attrs:{id:"方案二"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#方案二"}},[s._v("#")]),s._v(" 方案二：")]),s._v(" "),n("p",[s._v("用法如下")]),s._v(" "),n("p",[s._v("引入组件")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("A")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./A.vue'")]),s._v("\n\n\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("B")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./B.vue'")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("component "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("is"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("component"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("通过is 切换 A B 组件")]),s._v(" "),n("p",[s._v("使用场景")]),s._v(" "),n("p",[s._v("tab切换 居多")]),s._v(" "),n("p",[s._v("tab切换 居多")]),s._v(" "),n("p",[s._v("注意事项")]),s._v(" "),n("p",[s._v("1.在Vue2 的时候is 是通过组件名称切换的 在Vue3 setup 是通过组件实例切换的")]),s._v(" "),n("p",[s._v("2.如果你把组件实例放到Reactive Vue会给你一个警告")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("runtime-core.esm-bundler.js:38 [Vue warn]: Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`. \nComponent that was made reactive: \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("这是因为reactive 会进行proxy 代理 而我们组件代理之后毫无用处 节省性能开销 推荐我们使用shallowRef 或者  markRaw 跳过proxy 代理")]),s._v(" "),n("p",[s._v("修改如下")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('const tab = reactive<Com[]>([{\n    name: "A组件",\n    comName: markRaw(A)\n}, {\n    name: "B组件",\n    comName: markRaw(B)\n}])\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("例子：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<template>\n  <div>\n    <div class=\"tab-container\">\n      <div class=\"tab-item\" :class=\"{'active': item.com === componentId}\" v-for=\"(item, index) in tabList\" :key=\"index\" @click=\"changeTab(item)\">{{item.name}}</div>\n    </div>\n    <component :is=\"componentId\" ></component>\n  </div>\n</template>\n \n<script setup name=\"dynamicComponet\">\nimport a from './a.vue'\nimport b from './b.vue'\nimport c from './c.vue'\n \nimport {markRaw, reactive, shallowRef} from 'vue'\n \n// 这里也需要使用 shallowRef 去指定默认的\nlet componentId = shallowRef(a)\nconsole.log(componentId)\n \nlet tabList = reactive([\n  {\n    name: '新闻',\n    com: markRaw(a)\n  },\n  {\n    name: '音乐',\n    com: shallowRef(b)\n  },\n  {\n    name: '教育',\n    com: markRaw(c)\n  }\n])\n \nconst changeTab = (item) => {\n  componentId.value = item.com\n}\n \n<\/script>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://blog.51cto.com/u_15127641/2754528",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("方案三：")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://blog.csdn.net/qq_38074118/article/details/115912828?spm=1001.2101.3001.6650.5&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-5-115912828-blog-122891279.pc_relevant_multi_platform_whitelistv1_exp2&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-5-115912828-blog-122891279.pc_relevant_multi_platform_whitelistv1_exp2&utm_relevant_index=6",target:"_blank",rel:"noopener noreferrer"}},[s._v("参考文档--有用-ts写的"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=t.exports}}]);