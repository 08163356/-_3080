(window.webpackJsonp=window.webpackJsonp||[]).push([[584],{923:function(e,t,a){"use strict";a.r(t);var s=a(7),n=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("需求：")]),e._v(" "),t("p",[e._v("如何在监听到特定的dom元素加载完成后让我能对一些数据进行初始化")]),e._v(" "),t("p",[e._v("解决：")]),e._v(" "),t("p",[t("code",[e._v("MutationObserver")]),e._v("，作为"),t("code",[e._v("MutationObserver")]),e._v("的设计原理，简单理解就是")]),e._v(" "),t("p",[t("strong",[e._v("A想看新闻，A就先在B这'交钱（订阅）'，以后有新闻B就给A送报纸，A挑想看的新闻")])]),e._v(" "),t("ul",[t("li",[e._v("A - 订阅者 - 通过"),t("code",[e._v("MutationObserver")]),e._v("得到返回值(得到报纸) - 可以有无数的A来看B")]),e._v(" "),t("li",[e._v("B - 被观察者 - "),t("code",[e._v("DOM")]),e._v(" - 变更时发送新的内容(送新报纸) - B决定A\n")])]),e._v(" "),t("p",[e._v("特性：")]),e._v(" "),t("ul",[t("li",[e._v("异步执行，插入微任务队列，脚本执行后才会执行。（"),t("a",{attrs:{href:"https://juejin.cn/post/6844903919789801486",target:"_blank",rel:"noopener noreferrer"}},[e._v("微任务不能再清楚的帖子"),t("OutboundLink")],1),e._v("）")]),e._v(" "),t("li",[t("code",[e._v("mutations")]),e._v("参数将监听的"),t("code",[e._v("DOM")]),e._v("的所有变更记录按"),t("code",[e._v("执行顺序")]),e._v("封装成为一个"),t("code",[e._v("数组")]),e._v("返回。")]),e._v(" "),t("li",[e._v("可以通过配置项，监听目标"),t("code",[e._v("DOM")]),e._v("下"),t("code",[e._v("子元素")]),e._v("的变更记录")])]),e._v(" "),t("p",[e._v("使用：")]),e._v(" "),t("h5",{attrs:{id:"mutationobserver-observe-dom-options"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mutationobserver-observe-dom-options"}},[e._v("#")]),e._v(" MutationObserver.observe(dom, options)")]),e._v(" "),t("p",[e._v("启动监听，接收两个参数。")]),e._v(" "),t("ul",[t("li",[e._v("第一参数：被观察的"),t("code",[e._v("DOM")]),e._v("节点")]),e._v(" "),t("li",[e._v("第二参数：配置需要观察的变动项options（记得"),t("code",[e._v("MutationEvents")]),e._v("茫茫多的事件吗，这里通过配置项完成）")])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("mutationObserver.observe(content, {\n    attributes: true, // Boolean - 观察目标属性的改变\n    characterData: true, // Boolean - 观察目标数据的改变(改变前的数据/值)\n    childList: true, // Boolean - 观察目标子节点的变化，比如添加或者删除目标子节点，不包括修改子节点以及子节点后代的变化\n    subtree: true, // Boolean - 目标以及目标的后代改变都会观察\n    attributeOldValue: true, // Boolean - 表示需要记录改变前的目标属性值\n    characterDataOldValue: true, // Boolean - 设置了characterDataOldValue可以省略characterData设置\n    // attributeFilter: ['src', 'class'] // Array - 观察指定属性\n});\n\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br"),t("span",{staticClass:"line-number"},[e._v("8")]),t("br"),t("span",{staticClass:"line-number"},[e._v("9")]),t("br"),t("span",{staticClass:"line-number"},[e._v("10")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);